if [ -z "$TMUX" ]; then
    smug start home
else
    source $XDG_CONFIG_HOME/zsh/zsh_plugins.sh

    autoload -Uz compinit
    () {
      setopt extendedglob local_options
      if [[ -n ${ZDOTDIR:-$HOME}/.zcompdump(#qN.mh+24) ]]; then
         compinit
      else
        compinit -C
      fi
    }

    {{ template "shell/keybinds.sh" }}
    {{ template "shell/alias.sh" }}
    {{ template "shell/functions.sh" }}

    {{ template "shell/options.sh" }}
    {{ template "shell/env-vars.sh" }}


    eval "$(starship init zsh)"
    eval "$(zoxide init --cmd c zsh)"


    source $XDG_CONFIG_HOME/broot/launcher/bash/br

    zstyle ':completion:*' insert-tab false
    zstyle ':completion:*' menu select

    # auto url quoting
    autoload -Uz bracketed-paste-magic
    zle -N bracketed-paste bracketed-paste-magic
    autoload -Uz url-quote-magic
    zle -N self-insert url-quote-magic

    eval "$(direnv hook zsh)"
fi

if [ -z "$TMUX" ]; then
    tmux attach-session -d || tmuxinator start home --suppress-tmux-version-warning && tmux attach-session -d
else
    autoload -Uz compinit
    () {
      setopt extendedglob local_options
      if [[ -n ${ZDOTDIR:-$HOME}/.zcompdump(#qN.mh+24) ]]; then
         compinit
      else
        compinit -C
      fi
    }


    {{ template "shell/keybinds.sh" }}
    {{ template "shell/alias.sh" }}

    source $XDG_CONFIG_HOME/zsh/zsh_plugins.sh
    source ~/.tmuxinator/tmuxinator.zsh

    setopt GLOB_DOTS
    setopt PROMPT_SP
    setopt AUTO_PARAM_SLASH
    setopt AUTO_CD
    setopt SHARE_HISTORY
    setopt HIST_IGNORE_DUPS
    setopt HIST_FIND_NO_DUPS

    unsetopt nomatch

    AGKOZAK_BLANK_LINES=1
    AGKOZAK_LEFT_PROMPT_ONLY=1
    AGKOZAK_USER_HOST_DISPLAY=0
    AGKOZAK_COLORS_PATH=green

    # Treat these characters as part of a word.
    WORDCHARS='*?_-.[]~&;!#$%^(){}<>'

    export FZF_DEFAULT_COMMAND='fd --type f'
    export FZF_CTRL_T_COMMAND="$FZF_DEFAULT_COMMAND"
    export FZF_ALT_C_COMMAND="fd -t d -d 5"

    source /usr/share/fzf/key-bindings.zsh
    source /usr/share/fzf/completion.zsh
    source $XDG_CONFIG_HOME/broot/launcher/bash/br

    source $XDG_CONFIG_HOME/zsh/zsh_overrides.zsh

    zstyle ':completion:*' insert-tab false
    zstyle ':completion:*' menu select

fi

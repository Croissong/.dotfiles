#!/bin/env zsh

get() {
  kubectl get po | rg --smart-case $1 | tr -s ' ' | cut -d' ' -f 1 | while read podname; do kubectl get po $podname; done
}

delete() {
  kubectl get po | rg --smart-case $1 | tr -s ' ' | cut -d' ' -f 1 | while read podname; do kubectl delete po $podname; done
}

case "$1" in
delete)
  shift
  delete $@
  ;;
get)
  shift
  get $@
  ;;
*)
  echo "Usage: $0 {get|delete}" >&2
  exit 1
  ;;
esac
